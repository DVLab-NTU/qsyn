CSRCS     = $(wildcard *.cpp) $(wildcard *.c)
CHDRS     = $(wildcard *.h)
COBJS     = $(addsuffix .o, $(basename $(CSRCS)))

EXTINCDIR = ../../include
DEPENDDIR = -I. -I$(EXTINCDIR)
LIBDIR    = ../../lib
EXTLINK   = $(PKGNAME).d
LIBDEPEND = $(LIBDIR)/lib.d

CXX       = g++
CCC       = gcc
#CXX      = include-what-you-use
#CCC      = include-what-you-use
AR        = ar cr
ECHO      = /bin/echo

CFLAGS = -g -Wall -std=c++20 -DTA_KB_SETTING $(PKGFLAG)
CFLAGS = -O3 -Wall -std=c++20 -DTA_KB_SETTING $(PKGFLAG)

%.o : %.cpp
	@$(ECHO) "> compiling: $<"
	@$(CXX) $(CFLAGS) -I$(EXTINCDIR) -c -o $@ $<

%.o : %.c
	@$(ECHO) "> compiling: $<"
	@$(CCC) $(CFLAGS) -I$(EXTINCDIR) -c -o $@ $<

top: $(EXTLINK) target
	@$(ECHO) -n

include .depend.mak
include .extheader.mak
